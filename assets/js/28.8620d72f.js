(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{280:function(e,t,n){"use strict";n.r(t);var o=n(0),r=Object(o.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"æ•°æ®åŸç†"}},[e._v("æ•°æ®åŸç†")]),n("h3",{attrs:{id:"mvc"}},[e._v("MVC")]),n("ul",[n("li",[n("strong",[e._v("Model: æ¨¡å‹")]),e._v("ï¼ˆç”¨äºå°è£…ä¸åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„æ•°æ®ä»¥åŠå¯¹æ•°æ®çš„å¤„ç†æ–¹æ³•ï¼‰")]),n("li",[n("strong",[e._v("View: è§†å›¾")]),e._v("ï¼ˆæ¸²æŸ“é¡µé¢ï¼‰")]),n("li",[n("strong",[e._v("Controller: æ§åˆ¶å™¨")]),e._v("ï¼ˆMå’ŒVä¹‹é—´çš„è¿æ¥å™¨ï¼Œç”¨äºæ§åˆ¶åº”ç”¨ç¨‹åºçš„æµç¨‹ï¼ŒåŠé¡µé¢çš„ä¸šåŠ¡é€»è¾‘ï¼‰")])]),n("p",[n("strong",[e._v("ç‰¹ç‚¹")])]),n("p",[e._v("MVCæ¨¡å¼çš„ç‰¹ç‚¹åœ¨äºå®ç°å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå³åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®æ¨¡å‹ä¸ä¸šåŠ¡å’Œå±•ç¤ºé€»è¾‘è§£è€¦ã€‚åœ¨å®¢æˆ·ç«¯webå¼€å‘ä¸­ï¼Œå°±æ˜¯å°†æ¨¡å‹(M-æ•°æ®ã€æ“ä½œæ•°æ®)ã€è§†å›¾(V-æ˜¾ç¤ºæ•°æ®çš„HTMLå…ƒç´ )ä¹‹é—´å®ç°ä»£ç åˆ†ç¦»ï¼Œæ¾æ•£è€¦åˆï¼Œä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ›´å®¹æ˜“å¼€å‘ã€ç»´æŠ¤å’Œæµ‹è¯•çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚")]),n("ol",[n("li",[e._v("View ä¼ é€æŒ‡ä»¤åˆ° Controller ï¼›")]),n("li",[e._v("Controller å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œè¦æ±‚ Model æ”¹å˜çŠ¶æ€ ï¼›")]),n("li",[e._v("Model å°†æ–°çš„æ•°æ®å‘é€åˆ° Viewï¼Œç”¨æˆ·å¾—åˆ°åé¦ˆã€‚")])]),n("h3",{attrs:{id:"mvvm"}},[e._v("MVVM")]),n("p",[n("strong",[e._v("MVVM")]),e._v("æ˜¯"),n("strong",[e._v("Model-View-ViewModel")]),e._v("çš„ç®€å†™ã€‚")]),n("p",[e._v("ä¸æ­¤åŒæ—¶ï¼Œåœ¨æŠ€æœ¯å±‚é¢ï¼ŒWPFä¹Ÿå¸¦æ¥äº† è¯¸å¦‚**Bindingï¼ˆç»‘å®šï¼‰ã€Dependency Propertyï¼ˆä¾èµ–å±æ€§ï¼‰ã€Routed Eventsï¼ˆè·¯ç”±äº‹ä»¶ï¼‰ã€Commandï¼ˆå‘½ä»¤ï¼‰ã€DataTemplateï¼ˆæ•°æ®æ¨¡æ¿ï¼‰ã€ControlTemplateï¼ˆæ§åˆ¶æ¨¡æ¿ï¼‰**ç­‰æ–°ç‰¹æ€§ã€‚"),n("strong",[e._v("MVVMæ¨¡å¼å…¶å®æ˜¯MVæ¨¡å¼ä¸WPFç»“åˆçš„åº”ç”¨æ–¹å¼æ—¶å‘å±•æ¼”å˜è¿‡æ¥çš„ä¸€ç§æ–°å‹æ¶æ„æ¨¡å¼ã€‚å®ƒç«‹è¶³äºåŸæœ‰MVPæ¡†æ¶å¹¶ä¸”æŠŠWPFçš„æ–°ç‰¹æ€§ç³…åˆè¿›å»ï¼Œä»¥åº”å¯¹å®¢æˆ·æ—¥ç›Šå¤æ‚çš„éœ€æ±‚å˜åŒ–ã€‚")])]),n("p",[e._v("ViewModel å±‚æŠŠ View éœ€è¦çš„å±‚æ•°æ®æš´éœ²ï¼Œå¹¶å¯¹ View å±‚çš„ "),n("strong",[e._v("æ•°æ®ç»‘å®šå£°æ˜")]),e._v("ã€ "),n("strong",[e._v("æŒ‡ä»¤å£°æ˜")]),e._v("ã€ "),n("strong",[e._v("äº‹ä»¶ç»‘å®šå£°æ˜")]),e._v(" è´Ÿè´£ï¼Œä¹Ÿå°±æ˜¯å¤„ç† View å±‚çš„å…·ä½“ä¸šåŠ¡é€»è¾‘ã€‚ViewModel åº•å±‚ä¼šåšå¥½ç»‘å®šå±æ€§çš„ç›‘å¬ã€‚å½“ ViewModel ä¸­æ•°æ®å˜åŒ–ï¼ŒView å±‚ä¼šå¾—åˆ°æ›´æ–°ï¼›è€Œå½“ View ä¸­å£°æ˜äº†æ•°æ®çš„åŒå‘ç»‘å®šï¼ˆé€šå¸¸æ˜¯è¡¨å•å…ƒç´ ï¼‰ï¼Œæ¡†æ¶ä¹Ÿä¼šç›‘å¬ View å±‚ï¼ˆè¡¨å•ï¼‰å€¼çš„å˜åŒ–ã€‚ä¸€æ—¦å€¼å˜åŒ–ï¼ŒView å±‚ç»‘å®šçš„ ViewModel ä¸­çš„æ•°æ®ä¹Ÿä¼šå¾—åˆ°è‡ªåŠ¨æ›´æ–°ã€‚")]),n("p",[n("strong",[e._v("åŒå‘ç»‘å®šæŠ€æœ¯ï¼Œå½“Modelå˜åŒ–æ—¶ï¼ŒView-Modelä¼šè‡ªåŠ¨æ›´æ–°ï¼ŒViewä¹Ÿä¼šè‡ªåŠ¨å˜åŒ–")])]),n("h2",{attrs:{id:"åŒå‘æ•°æ®ç»‘å®šåŸç†"}},[e._v("åŒå‘æ•°æ®ç»‘å®šåŸç†")]),n("p",[e._v("vue.js æ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡"),n("code",[e._v("Object.defineProperty()")]),e._v("æ¥åŠ«æŒå„ä¸ªå±æ€§çš„"),n("code",[e._v("setter")]),e._v("ï¼Œ"),n("code",[e._v("getter")]),e._v("ï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚")]),n("p",[n("strong",[e._v("ç¬¬ä¸€æ­¥ï¼šéœ€è¦observeçš„æ•°æ®å¯¹è±¡è¿›è¡Œé€’å½’éå†")]),e._v("ï¼ŒåŒ…æ‹¬å­å±æ€§å¯¹è±¡çš„å±æ€§ï¼Œéƒ½åŠ ä¸Š "),n("code",[e._v("setter")]),e._v("å’Œ"),n("code",[e._v("getter")]),e._v(" è¿™æ ·çš„è¯ï¼Œç»™è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªå€¼èµ‹å€¼ï¼Œå°±ä¼šè§¦å‘"),n("code",[e._v("setter")]),e._v("ï¼Œé‚£ä¹ˆå°±èƒ½ç›‘å¬åˆ°äº†æ•°æ®å˜åŒ–")]),n("p",[n("strong",[e._v("ç¬¬äºŒæ­¥ï¼šcompileè§£ææ¨¡æ¿æŒ‡ä»¤")]),e._v("ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§†å›¾")]),n("p",[n("strong",[e._v("ç¬¬ä¸‰æ­¥ï¼šWatcherè®¢é˜…è€…æ˜¯Observerå’ŒCompileä¹‹é—´é€šä¿¡çš„æ¡¥æ¢")]),e._v("ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯: 1ã€åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨(dep)é‡Œé¢æ·»åŠ è‡ªå·± 2ã€è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ªupdate()æ–¹æ³• 3ã€å¾…å±æ€§å˜åŠ¨dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„update()æ–¹æ³•ï¼Œå¹¶è§¦å‘Compileä¸­ç»‘å®šçš„å›è°ƒï¼Œåˆ™åŠŸæˆèº«é€€ã€‚")]),n("p",[n("strong",[e._v("ç¬¬å››æ­¥ï¼šMVVMä½œä¸ºæ•°æ®ç»‘å®šçš„å…¥å£ï¼Œæ•´åˆObserverã€Compileå’ŒWatcherä¸‰è€…")]),e._v("ï¼Œé€šè¿‡Observeræ¥ç›‘å¬è‡ªå·±çš„modelæ•°æ®å˜åŒ–ï¼Œé€šè¿‡Compileæ¥è§£æç¼–è¯‘æ¨¡æ¿æŒ‡ä»¤ï¼Œæœ€ç»ˆåˆ©ç”¨Watcheræ­èµ·Observerå’ŒCompileä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œè¾¾åˆ°æ•°æ®å˜åŒ– -> è§†å›¾æ›´æ–°ï¼›è§†å›¾äº¤äº’å˜åŒ–(input) -> æ•°æ®modelå˜æ›´çš„åŒå‘ç»‘å®šæ•ˆæœ")]),n("h2",{attrs:{id:"ç®€å•å®ç°"}},[e._v("ç®€å•å®ç°")]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<body>\n    <div id='app'>\n        <h3>å§“å</h3>\n        <p>{{name}}</p>\n        <h3>å¹´é¾„</h3>\n        <p1>{{age}}</p1>\n        <p2>{{what}}</p2>\n    </div>\n</body>\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<script>\ndocument.addEventListener('DOMContentLoaded', function() {\n    let opt = { el: '#app', data: { name: 'æ£€ç´¢ä¸­...', age: 20, what: \"?\" } }\n    let vm = new Vue(opt)\n    setTimeout(() => {\n        opt.data.name = 'tao'\n        opt.data.age = 18\n        opt.data.what =  ''\n    }, 2000);\n}, false)\nclass Vue {\n    constructor(opt) {\n        this.opt = opt\n        this.observe(opt.data)\n        let root = document.querySelector(opt.el)\n        this.compile(root)\n    }\n    // ä¸ºå“åº”å¼å¯¹è±¡ data é‡Œçš„æ¯ä¸€ä¸ª key ç»‘å®šä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡\n    observe(data) {\n        let obv = new Observer()\n        Object.keys(data).forEach(key => {\n            data[\"_\" + key] = data[key]\n            // é€šè¿‡ getter setter æš´éœ² for å¾ªç¯ä¸­ä½œç”¨åŸŸä¸‹çš„ obvï¼Œé—­åŒ…äº§ç”Ÿ\n            Object.defineProperty(data, key, {\n                get() {\n                    Observer.target && obv.addSubNode({ key, node: Observer.target });\n                    console.log(obv.subNode)\n                    return data['_' + key]\n                },\n                set(newVal) {\n                    obv.update(key, newVal)\n                    data['_' + key] = newVal\n                }\n            })\n        })\n    }\n    // åˆå§‹åŒ–é¡µé¢ï¼Œéå† DOMï¼Œæ”¶é›†æ¯ä¸€ä¸ªkeyå˜åŒ–æ—¶ï¼Œéšä¹‹è°ƒæ•´çš„ä½ç½®ï¼Œä»¥è§‚å¯Ÿè€…æ–¹æ³•å­˜æ”¾èµ·æ¥    \n    compile(node) {\n        [].forEach.call(node.childNodes, child => {\n            if (!child.firstElementChild && /\\{\\{(.*)\\}\\}/.test(child.innerHTML)) {\n                let key = RegExp.$1.trim()\n                child.innerHTML = child.innerHTML.replace(new RegExp('\\\\{\\\\{\\\\s*' + key + '\\\\s*\\\\}\\\\}', 'gm'), this.opt.data[key])\n                Observer.target = child\n                this.opt.data[key] // è§¦å‘getter\n                Observer.target = null\n            } else if (child.firstElementChild)\n                console.log(2)\n            this.compile(child)\n        })\n    }\n}\n// å¸¸è§„è§‚å¯Ÿè€…ç±»\nclass Observer {\n    constructor() {\n        this.subNode = []\n    }\n    addSubNode(node) {\n        this.subNode.push(node)\n    }\n    update(k, newVal) {\n        this.subNode.forEach(obj => {\n            const { key, node } = obj;\n            if (key === k) {\n                node.innerHTML = newVal\n            }\n        })\n    }\n}\n<\/script>\n")])])]),n("p",[e._v("Now, let's try it ğŸ‘‰")])])}],!1,null,null,null);t.default=r.exports}}]);