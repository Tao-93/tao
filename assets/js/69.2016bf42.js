(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{329:function(n,e,t){"use strict";t.r(e);var s=t(0),l=Object(s.a)({},(function(){var n=this.$createElement;this._self._c;return this._m(0)}),[function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"webpack"}},[n._v("webpack")]),t("h2",{attrs:{id:"webpack-æ ¸å¿ƒæ¦‚å¿µ"}},[n._v("webpack æ ¸å¿ƒæ¦‚å¿µ")]),t("ul",[t("li",[t("p",[n._v("entry")]),t("p",[n._v("å…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—,æ¥ä½œä¸ºæž„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚")]),t("p",[n._v("è¿›å…¥å…¥å£èµ·ç‚¹åŽ,webpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æŽ¥å’Œé—´æŽ¥ï¼‰ä¾èµ–çš„ã€‚")]),t("p",[n._v("æ¯ä¸ªä¾èµ–é¡¹éšå³è¢«å¤„ç†,æœ€åŽè¾“å‡ºåˆ°ç§°ä¹‹ä¸º bundles çš„æ–‡ä»¶ä¸­ã€‚")])]),t("li",[t("p",[n._v("output")]),t("p",[n._v("output å±žæ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundles,ä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶,é»˜è®¤å€¼ä¸º ./distã€‚")]),t("p",[n._v("åŸºæœ¬ä¸Š,æ•´ä¸ªåº”ç”¨ç¨‹åºç»“æž„,éƒ½ä¼šè¢«ç¼–è¯‘åˆ°ä½ æŒ‡å®šçš„è¾“å‡ºè·¯å¾„çš„æ–‡ä»¶å¤¹ä¸­ã€‚")])]),t("li",[t("p",[n._v("module")]),t("p",[n._v("æ¨¡å—,åœ¨ Webpack é‡Œä¸€åˆ‡çš†æ¨¡å—,ä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ã€‚Webpack ä¼šä»Žé…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚")])]),t("li",[t("p",[n._v("chunk")]),t("p",[n._v("ä»£ç å—,ä¸€ä¸ª Chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆ,ç”¨äºŽä»£ç åˆå¹¶ä¸Žåˆ†å‰²ã€‚")])]),t("li",[t("p",[n._v("loader")]),t("p",[n._v("loader è®© webpack èƒ½å¤ŸåŽ»å¤„ç†é‚£äº›éž JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚")]),t("p",[n._v("loader å¯ä»¥å°†æ‰€æœ‰ç±»åž‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—,ç„¶åŽä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›,å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚")]),t("p",[n._v("æœ¬è´¨ä¸Š,webpack loader å°†æ‰€æœ‰ç±»åž‹çš„æ–‡ä»¶,è½¬æ¢ä¸ºåº”ç”¨ç¨‹åºçš„ä¾èµ–å›¾ï¼ˆå’Œæœ€ç»ˆçš„ bundleï¼‰å¯ä»¥ç›´æŽ¥å¼•ç”¨çš„æ¨¡å—ã€‚")])])]),t("h2",{attrs:{id:"webpack-æž„å»ºæµç¨‹"}},[n._v("webpack æž„å»ºæµç¨‹")]),t("ol",[t("li",[n._v("åˆå§‹åŒ–å‚æ•°ï¼šä»Žé…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸Žåˆå¹¶å‚æ•°,å¾—å‡ºæœ€ç»ˆçš„å‚æ•°ã€‚")]),t("li",[n._v("å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡,åŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶,æ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘ã€‚")]),t("li",[n._v("ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶ã€‚")]),t("li",[n._v("ç¼–è¯‘æ¨¡å—ï¼šä»Žå…¥å£æ–‡ä»¶å‡ºå‘,è°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘,å†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—,å†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ã€‚")]),t("li",[n._v("å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬ 4 æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åŽ,å¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åŽçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚")]),t("li",[n._v("è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»,ç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunk,å†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨,è¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åŽæœºä¼šã€‚")]),t("li",[n._v("è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åŽ,æ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶å,æŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚")])]),t("p",[n._v("åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­,Webpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶,æ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åŽä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘,å¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æžœã€‚")]),t("h2",{attrs:{id:"webpack4-0"}},[n._v("webpack4.0")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("const path = require('path');\nconst glob = require('glob');\nconst webpack = require('webpack');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextWebpackPlugin = require('extract-text-webpack-plugin');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst PurifyCSSPlugin = require('purifycss-webpack'); // åŽ»é™¤æ— ç”¨çš„css\nconst optimizeCss = require('optimize-css-assets-webpack-plugin'); //CSSåŽ‹ç¼©\nconst WebpackParallelUglifyPlugin = require('webpack-parallel-uglify-plugin'); //jsä¼˜åŒ–\nconst UglifyJsPlugin = require('uglifyjs-webpack-plugin');\n\n\nmodule.exports = {\n    entry: {\n        index: './src/js/index.js',\n        login: './src/js/login.js'\n    },\n    output: {\n        filename: 'js/[name].[hash:4].js',\n        path: path.resolve('dist')\n    },\n    performance: {\n        // hints: false\n        hints: \"warning\", // æžšä¸¾\n        maxAssetSize: 30000000, // æ•´æ•°ç±»åž‹ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰\n        maxEntrypointSize: 50000000, // æ•´æ•°ç±»åž‹ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰\n        assetFilter: function(assetFilename) {\n            // æä¾›èµ„æºæ–‡ä»¶åçš„æ–­è¨€å‡½æ•°\n            return assetFilename.endsWith('.css') || assetFilename.endsWith('.js');\n        }\n    },\n    module: {\n        rules: [{\n            test: /\\.css$/,\n            use: ExtractTextWebpackPlugin.extract({\n                use: [{\n                    loader: 'css-loader',\n                }, {\n                    loader: 'postcss-loader',\n                }],\n                publicPath: '../'\n            }),\n            include: path.resolve(__dirname, 'src'),\n            exclude: /node_modules/\n        }, {\n            test: /\\.scss/,\n            use: ExtractTextWebpackPlugin.extract({\n                use: [{\n                    loader: 'css-loader'\n                }, {\n                    loader: 'sass-loader'\n                }, {\n                    loader: 'postcss-loader'\n                }],\n                fallback: 'style-loader',\n                publicPath: '../'\n            }),\n            include: path.resolve(__dirname, 'src'),\n            exclude: /node_modules/\n        }, {\n            test: /\\.(jpe?g|png|gif)$/,\n            use: [{\n                loader: 'url-loader',\n                options: {\n                    limit: 5 * 1024,\n                    outputPath: 'images/'\n                }\n            }]\n        }, {\n            test: /\\.(htm|html)$/,\n            use: 'html-withimg-loader'\n        }, {\n            test: /\\.(eot|ttf|woff|svg)$/,\n            use: [{\n                loader: 'file-loader',\n                options: {\n                    outputPath: 'fonts/'\n                }\n            }]\n        }, {\n            test: /\\.js?$/,\n            exclude: /(node_modules)/,\n            loader: 'babel-loader'\n        }]\n    },\n    optimization: {\n        minimize: true, //å–ä»£ new UglifyJsPlugin(/* ... */)\n        providedExports: true,\n        usedExports: true,\n        //è¯†åˆ«package.jsonä¸­çš„sideEffectsä»¥å‰”é™¤æ— ç”¨çš„æ¨¡å—ï¼Œç”¨æ¥åštree-shake\n        //ä¾èµ–äºŽoptimization.providedExportså’Œoptimization.usedExports\n        sideEffects: true,\n        //å–ä»£ new webpack.optimize.ModuleConcatenationPlugin()\n        concatenateModules: true,\n        //å–ä»£ new webpack.NoEmitOnErrorsPlugin()ï¼Œç¼–è¯‘é”™è¯¯æ—¶ä¸æ‰“å°è¾“å‡ºèµ„æºã€‚\n        noEmitOnErrors: true,\n        splitChunks: {\n            chunks: 'async',\n            minSize: 30000,\n            minChunks: 1,\n            maxAsyncRequests: 5,\n            maxInitialRequests: 3,\n            automaticNameDelimiter: '~',\n            name: true,\n            cacheGroups: {\n                vendor: {\n                    name: \"vendor\",\n                    chunks: \"initial\",\n                    minChunks: 2\n                }\n            }\n        }\n    },\n    plugins: [\n        // new HtmlWebpackPlugin({\n        //     title: 'template',\n        //     template: './src/index.html',\n        //     filename: 'index.html',\n        //     chunks: ['vendor', 'index'],\n        //     hash: true\n        // }),\n        // new HtmlWebpackPlugin({\n        //     title: 'Custom template',\n        //     template: './src/login.html',\n        //     filename: 'login.html',\n        //     chunks: ['vendor', 'login'],\n        //     hash: true\n        // }),\n        new optimizeCss({\n            cssProcessor: require('cssnano'), //å¼•å…¥cssnanoé…ç½®åŽ‹ç¼©é€‰é¡¹\n            cssProcessorOptions: {\n                discardComments: { removeAll: true }\n            },\n            canPrint: true //æ˜¯å¦å°†æ’ä»¶ä¿¡æ¯æ‰“å°åˆ°æŽ§åˆ¶å°\n        }),\n        new webpack.HotModuleReplacementPlugin(),\n        new ExtractTextWebpackPlugin('css/style.css'),\n        new CleanWebpackPlugin('dist'),\n        new PurifyCSSPlugin({\n            paths: glob.sync(path.join(__dirname, 'src/*.html'))\n        }),\n         new WebpackParallelUglifyPlugin({\n             uglifyJS: {\n                output: {\n                    beautify: false, //ä¸éœ€è¦æ ¼å¼åŒ–\n                   comments: false //ä¸ä¿ç•™æ³¨é‡Š\n                },\n                 compress: {\n                    warnings: false, // åœ¨UglifyJsåˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç æ—¶ä¸è¾“å‡ºè­¦å‘Š\n                     drop_console: true, // åˆ é™¤æ‰€æœ‰çš„ `console` è¯­å¥ï¼Œå¯ä»¥å…¼å®¹ieæµè§ˆå™¨\n                     collapse_vars: true, // å†…åµŒå®šä¹‰äº†ä½†æ˜¯åªç”¨åˆ°ä¸€æ¬¡çš„å˜é‡\n                     reduce_vars: true // æå–å‡ºå‡ºçŽ°å¤šæ¬¡ä½†æ˜¯æ²¡æœ‰å®šä¹‰æˆå˜é‡åŽ»å¼•ç”¨çš„é™æ€å€¼\n                 }\n             }\n        })\n    ],\n    resolve: {\n        alias: {\n            'jquery$': path.resolve(__dirname, 'src/js/jquery.js'),\n            '_$': path.resolve(__dirname, 'src/js/lodash.min.js')\n        },\n        extensions: ['.js', '.json', '.css']\n    },\n    devServer: {\n        contentBase: './dist',\n        host: 'localhost',\n        port: 8866,\n        // open: true,\n        hot: true,\n        compress: true\n    }\n    // mode: 'development' //development--production\n};\n//é…ç½®é¡µé¢\nconst getHtmlConfig = function(name, title, chunks) {\n    return {\n        template: __dirname + \"/src/\" + name + \".html\",\n        filename: name + \".html\",\n        // favicon: './favicon.ico',\n        title: title,\n        hash: true, //å¼€å¯hash  ?[hash]\n        chunks: chunks, //é¡µé¢è¦å¼•å…¥çš„åŒ…\n        minify: process.env.NODE_ENV === \"development\" ? false : {\n            removeComments: true, //ç§»é™¤HTMLä¸­çš„æ³¨é‡Š\n            // collapseWhitespace: true, //æŠ˜å ç©ºç™½åŒºåŸŸ ä¹Ÿå°±æ˜¯åŽ‹ç¼©ä»£ç \n            // removeAttributeQuotes: true, //åŽ»é™¤å±žæ€§å¼•ç”¨\n        },\n    };\n};\nconst htmlArray = [{\n        _html: 'index',\n        _title: 'é¦–é¡µ',\n        _chunks: ['vendor', 'index']\n    },\n    {\n        _html: 'login',\n        _title: 'ç™»å½•',\n        _chunks: ['vendor', 'login']\n    },\n];\nhtmlArray.forEach((element) => {\n    module.exports.plugins.push(new HtmlWebpackPlugin(getHtmlConfig(element._html, element._title, element._chunks)));\n});\n")])])]),t("p",[n._v("Now, let's try it ðŸ‘‰")])])}],!1,null,null,null);e.default=l.exports}}]);