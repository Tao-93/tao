(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{290:function(e,n,t){"use strict";t.r(n);var a=t(0),s=Object(a.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"ç»„ä»¶é€šä¿¡"}},[e._v("ç»„ä»¶é€šä¿¡")]),t("h2",{attrs:{id:"_1-çˆ¶ç»„ä»¶æ˜¯é€šè¿‡propsä¼ é€’æ•°æ®ç»™å­ç»„ä»¶"}},[e._v("1.çˆ¶ç»„ä»¶æ˜¯é€šè¿‡propsä¼ é€’æ•°æ®ç»™å­ç»„ä»¶")]),t("p",[e._v("v-model ä¸­åŒ…å«äº†ä¸¤ä¸ªå­ç»„ä»¶")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<div class="w-base">\n    <book-component v-bind:bookdata="book"></book-component>\n</div>\n\n<div class="base">\n    <node-component v-bind:catalog="catalog" ></node-component>\n</div>\n')])])]),t("p",[e._v("åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®šä¹‰äº†ä¸¤ä¸ªå­ç»„ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨æŒ‡å®šv-bindæŒ‡ä»¤ä¼ é€’äº†æ•°æ®ï¼Œå­ç»„ä»¶ä¼šæ¥æ”¶åˆ°ä¼ é€’çš„æ•°æ®ã€‚")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Vue.component('book-component', {\n  template: tpl,//å¯ä»¥ä¼ è¿›æ¥å­ç»„ä»¶çš„æ¨¡æ¿æ–‡ä»¶\n  props: ['book'],\n  data: function () {\n    return { myBook: this.bookdata }\n  }\n})\n")])])]),t("p",[e._v("å»ºè®®æ¥æ”¶åˆ°å•å‘çš„propsæ•°æ®åï¼Œå®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡æ¥åˆå§‹åŒ–ä½¿ç”¨ã€‚")]),t("h2",{attrs:{id:"_2-çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶ä¹‹é—´é€šä¿¡çš„å…¶ä»–æ–¹å¼"}},[e._v("2.çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶ä¹‹é—´é€šä¿¡çš„å…¶ä»–æ–¹å¼")]),t("p",[e._v("vueä¸­ç»™å®ä¾‹æä¾›äº†ä¸‰ä¸ªæˆ‘ä»¬å¯ç”¨çš„API"),t("code",[e._v("$children")]),e._v("å’Œ"),t("code",[e._v("$refs")]),e._v("ä»¥åŠ"),t("code",[e._v("$parent")]),e._v("ã€‚")]),t("p",[t("code",[e._v("$children")]),e._v("ï¼šå½“å‰å®ä¾‹çš„ç›´æ¥å­ç»„ä»¶ã€‚éœ€è¦æ³¨æ„ $children å¹¶ä¸ä¿è¯é¡ºåºï¼Œä¹Ÿä¸æ˜¯å“åº”å¼çš„ã€‚")]),t("p",[t("code",[e._v("$refs")]),e._v("ï¼šåŒ…å«äº†å½“å‰å®ä¾‹æ‰€æœ‰æ‹¥æœ‰ "),t("code",[e._v("ref")]),e._v(" æ³¨å†Œçš„å­ç»„ä»¶çš„å¯¹è±¡.")]),t("p",[t("code",[e._v("$parent")]),e._v(": å½“å‰å®ä¾‹çš„çˆ¶å®ä¾‹ã€‚")]),t("p",[e._v("æ‰€ä»¥è¯´ï¼Œå¦‚æœåœ¨é€šä¿¡æ–¹é¢æˆ‘ä»¬æˆ‘ç»„ä»¶æƒ³è¦è°ƒç”¨å­ç»„ä»¶ï¼Œèƒ½ç”¨çš„æ–¹æ³•åªæœ‰"),t("code",[e._v("$refs")]),e._v("äº†ï¼Œå› ä¸º"),t("code",[e._v("$children")]),e._v("æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”ä¸ä¿è¯é¡ºåºï¼Œä¹Ÿæ²¡æœ‰ç›¸å…³çš„idå»å¯»æ‰¾æˆ‘ä»¬éœ€è¦çš„é‚£ä¸ªç‰¹å®šå­ç»„ä»¶ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨"),t("code",[e._v("$refs")]),e._v("å»å¯»æ‰¾ç‰¹å®šå­ç»„ä»¶ï¼Œé‚£å°±å¿…é¡»è¦ç»™é‚£ä¸ªå­ç»„ä»¶æ³¨å†Œ"),t("code",[e._v("ref")]),e._v("ã€‚")]),t("p",[e._v("çˆ¶ç»„ä»¶çš„æ¨¡ç‰ˆ")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('\x3c!-- vm.$refs.child will be the child comp instance --\x3e\n<child-component ref="child"></child-comp>\n')])])]),t("p",[e._v("çˆ¶ç»„ä»¶")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("//æ‰¾åˆ°å­ç»„ä»¶å¹¶ä¸”è°ƒç”¨å®ƒçš„æ–¹æ³•\nvar myChild = this.$refs.child;\nmyChild.func();\n")])])]),t("p",[e._v("å­ç»„ä»¶")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("//æ‰¾åˆ°çˆ¶ç»„ä»¶å¹¶ä¸”è°ƒç”¨å®ƒçš„æ–¹æ³•\nvar myParent = this.$parent;\nmyParent.func();\n")])])]),t("h2",{attrs:{id:"_3-å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ æ•°æ®"}},[e._v("3.å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ æ•°æ®")]),t("p",[e._v("vm.$emit( event, arg ) ----------è§¦å‘å½“å‰å®ä¾‹ä¸Šçš„äº‹ä»¶")]),t("p",[e._v("vm.$on( event, fn )----------------ç›‘å¬eventäº‹ä»¶åè¿è¡Œ fn")]),t("p",[e._v("çˆ¶ç»„ä»¶")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("<template lang=\"pug\">\n  div\n    demo(:msg=\"msg\" v-on:changeMsg='onChange')\n</template>\n\n<script>\nimport Demo from './demo.vue'\nexport default {\n  data () {\n    return {\n      msg: 'é¦–æ¬¡æ•°æ®ä¼ é€’'\n    }\n  },\n  components: {\n    Demo\n  },\n  methods: {\n    onChange (msg) {\n      this.msg = msg\n    }\n  }\n}\n<\/script>\n")])])]),t("p",[e._v("æˆ‘ä»¬éšåæŠŠdemoå¼•å…¥ï¼Œä¼ å…¥å­ç»„ä»¶çš„msgæˆ‘ä»¬äº‹å…ˆåœ¨dataæ•°æ®é‡Œé¢å®šä¹‰å¥½ï¼ŒåŒæ—¶åœ¨demoç»„ä»¶ä¸Šè¿›è¡Œä¸€ä¸ª$onçš„ç›‘å¬")]),t("p",[e._v("å­ç»„ä»¶")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("<template lang=\"pug\">\n  .demo\n    .demo-example(@click=\"changePropsValue\") {{msg}}\n</template>\n<script>\nexport default {\n  props: ['msg'],\n  methods: {\n    changePropsValue () {\n      this.$emit('changeMsg', 'é€šè¿‡$emitè§¦å‘äº‹ä»¶äº†')\n    }\n  }\n}\n<\/script>å¤åˆ¶ä»£ç \n")])])]),t("p",[e._v("1.msgæ˜¯é€šè¿‡çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ï¼Œæˆ‘ä»¬å…ˆå‰å¯è‚¯å®šè¦åœ¨propsé‡Œå£°æ˜å¥½\n2.åœ¨ç‚¹å‡»çš„æ—¶å€™ï¼Œæˆ‘ä»¬è§¦å‘äº†changeMsgäº‹ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼Œä½ æƒ³è¦ä¼ åˆ°çˆ¶ç»„ä»¶çš„å‚æ•°")]),t("h2",{attrs:{id:"_4-å¹³è¡Œç»„ä»¶ä¹‹é—´çš„ä¸¤ç§é€šä¿¡æ–¹å¼"}},[e._v("4.å¹³è¡Œç»„ä»¶ä¹‹é—´çš„ä¸¤ç§é€šä¿¡æ–¹å¼")]),t("p",[e._v("a.å®˜æ–¹æä¾›çš„äº‹ä»¶bus")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var bus = new Vue()\n// è§¦å‘ç»„ä»¶ A ä¸­çš„äº‹ä»¶\nbus.$emit('id-selected', 1)\n// åœ¨ç»„ä»¶ B åˆ›å»ºçš„é’©å­ä¸­ç›‘å¬äº‹ä»¶\nbus.$on('id-selected', function (id) {\n  // ...\n})\n")])])]),t("p",[e._v("b.é€šè¿‡çˆ¶ç»„ä»¶å»æ‰¾å…„å¼Ÿç»„ä»¶")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("//æ‰¾åˆ°çˆ¶ç»„ä»¶çš„$refså¯¹è±¡ï¼Œç„¶åæ‰¾åˆ°ç»„ä»¶çš„å…„å¼Ÿç»„ä»¶\n var $refs = this.$parent?this.$parent.$refs:{};\n var childComponent =  $refs.child; //childä¸ºæ”¹ç»„ä»¶çš„refå±æ€§å€¼\n")])])]),t("blockquote",[t("p",[e._v("å…¶å®ä»¥ä¸Šä¸¤ç§æ–¹æ³•æœ€å¥½çš„å®è·µæ–¹å¼æ˜¯å°è£…åˆ°é¡¹ç›®çš„åŸºç±»ä¸­ï¼Œè¿™æ ·ä¸ç”¨æ¯æ¬¡éƒ½å»å®šä¹‰ä¸€ä¸ªç©ºVue()å®ä¾‹ï¼Œè€Œæ˜¯æ¯ä¸ªå®ä¾‹çš„åŸºç±»ä¸­éƒ½æœ‰è¿™ä¸ªäº‹ä»¶busã€‚åŒæ ·å¯ä»¥å°è£…æ‰¾åˆ°å…¶ä»–å…„å¼Ÿç»„ä»¶çš„æ–¹æ³•ï¼Œä½†æ˜¯è¯¥å…„å¼Ÿç»„ä»¶å¿…é¡»æ³¨å†Œref")])]),t("p",[t("strong",[e._v("ä¸‹é¢è¿™ä¸ªæ–¹æ³•æ˜¯æˆ‘åœ¨é¡¹ç›®ä¸­å°è£…çš„ç”¨äºæ‰¾åˆ°çˆ¶ç»„ä»¶ï¼Œç„¶åå†å»æ‰¾åˆ°å…„å¼Ÿç»„ä»¶çš„æ–¹æ³•ã€‚")])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("//å¹³è¡Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡\ngetComponentByRef: function(refId) {\n    var $refs = this.$parent?this.$parent.$refs:{};\n    for (var $id in $refs) {\n        if ($id == refId) {\n            return $refs[$id];\n        }\n    }\n    return null;\n}\n")])])]),t("p",[t("strong",[e._v("ä½¿ç”¨")])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('//åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨\nthis.getComponentByRef("booknode").updateNode(this.node);\n')])])]),t("h2",{attrs:{id:"_5-ç»„ä»¶é—´å¤æ‚æ•°æ®é€šä¿¡vuex"}},[e._v("5.ç»„ä»¶é—´å¤æ‚æ•°æ®é€šä¿¡Vuex")]),t("p",[e._v("ä¸€è¯´åˆ°vuexï¼Œå¾ˆå¤šåˆšå¼€å§‹æ¥è§¦vueçš„äººä¼šä¸»åŠ¨é¿å…å»ä½¿ç”¨å®ƒï¼Œå…¶å®å®ƒå¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¤æ‚ã€‚æœ€å¥½çš„å¼€å§‹æ˜¯å¼•å…¥vuexåï¼Œèµ°ä¸€éç»™å‡ºçš„å°ç¤ºä¾‹ã€‚ä½†æ˜¯å¦‚æœä½ çš„é¡¹ç›®å¹¶ä¸å¤æ‚çš„è¯ï¼Œå¯ä»¥ä¸è€ƒè™‘çŠ¶æ€ç®¡ç†ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨çŠ¶æ€ç®¡ç†å‘¢ï¼Ÿ")]),t("p",[e._v("æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªå¸ƒå±€")]),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/8/14/23c1698327a549f86c524a6f5038bb91?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})]),t("p",[e._v("å¦‚æœcomponent1ä¸­çš„æŸä¸ªæ•°æ®å˜æ›´ï¼Œé‚£ä¹ˆcom2,com3ä¹Ÿè¦è·Ÿç€æ›´æ–°ï¼Œæ­¤æ—¶com3ä¸­åˆç»†åˆ†ä¸ºäº†ä¸‰ä¸ªå°ç»„ä»¶ã€‚")]),t("p",[e._v("é—®é¢˜ï¼š")]),t("ol",[t("li",[e._v("å¤šä¸ªè¯•å›¾ä¾èµ–åŒä¸€ä¸ªçŠ¶æ€")]),t("li",[e._v("å¤šå±‚åµŒå¥—çš„ç»„ä»¶ï¼Œæ•°æ®å˜æ›´å’Œä»£ç ç»´æŠ¤å›°éš¾")])]),t("p",[e._v("Now, let's try it ğŸ‘‰")])])}],!1,null,null,null);n.default=s.exports}}]);