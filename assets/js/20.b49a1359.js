(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{270:function(t,s,n){"use strict";n.r(s);var e=n(0),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"devops"}},[t._v("DevOps")]),n("h2",{attrs:{id:"linuxåŸºç¡€"}},[t._v("LinuxåŸºç¡€")]),n("h3",{attrs:{id:"å…¬åŒ™ä¿¡ä»»"}},[t._v("å…¬åŒ™ä¿¡ä»»")]),t._m(0),n("h3",{attrs:{id:"sshç™»å½•"}},[t._v("SSHç™»å½•")]),t._m(1),n("h3",{attrs:{id:"ç›®å½•æ“ä½œ"}},[t._v("ç›®å½•æ“ä½œ")]),t._m(2),n("h3",{attrs:{id:"æ–‡æœ¬æ“ä½œ"}},[t._v("æ–‡æœ¬æ“ä½œ")]),t._m(3),n("h3",{attrs:{id:"ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹"}},[t._v("ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹")]),t._m(4),n("h3",{attrs:{id:"ç³»ç»Ÿè¿›ç¨‹"}},[t._v("ç³»ç»Ÿè¿›ç¨‹")]),t._m(5),n("h3",{attrs:{id:"ç½‘ç»œçŠ¶å†µ"}},[t._v("ç½‘ç»œçŠ¶å†µ")]),t._m(6),n("h3",{attrs:{id:"ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨"}},[t._v("ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨")]),t._m(7),n("h2",{attrs:{id:"nginxåŸºç¡€"}},[t._v("NginxåŸºç¡€")]),n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/wecUdGnuHdZOs3t7zc16jw",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginxæŠ€æœ¯åˆ†æ"),n("OutboundLink")],1)]),n("h3",{attrs:{id:"å®‰è£…"}},[t._v("å®‰è£…")]),t._m(8),n("h3",{attrs:{id:"å¸¸ç”¨å‘½ä»¤"}},[t._v("å¸¸ç”¨å‘½ä»¤")]),t._m(9),n("h3",{attrs:{id:"é™æ€èµ„æº"}},[t._v("é™æ€èµ„æº")]),t._m(10),n("h3",{attrs:{id:"åå‘ä»£ç†"}},[t._v("åå‘ä»£ç†")]),t._m(11),n("h3",{attrs:{id:"websocket-ioæ”¯æŒ"}},[t._v("Websocket.ioæ”¯æŒ")]),t._m(12),n("h3",{attrs:{id:"httpsæ”¯æŒ"}},[t._v("HTTPSæ”¯æŒ")]),t._m(13),n("h3",{attrs:{id:"nginx-conf-è¯¦è§£"}},[t._v("nginx.conf è¯¦è§£")]),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),n("h2",{attrs:{id:"pm2åŸºç¡€"}},[t._v("PM2åŸºç¡€")]),n("h3",{attrs:{id:"å®‰è£…ä½¿ç”¨"}},[t._v("å®‰è£…ä½¿ç”¨")]),t._m(28),n("h3",{attrs:{id:"è¿è¡Œè¿›ç¨‹çš„ä¸åŒæ–¹å¼ï¼š"}},[t._v("è¿è¡Œè¿›ç¨‹çš„ä¸åŒæ–¹å¼ï¼š")]),t._m(29),n("h3",{attrs:{id:"å¯åŠ¨æ–‡ä»¶"}},[t._v("å¯åŠ¨æ–‡ä»¶")]),t._m(30),n("p",[t._v("Now, let's try it ğŸ‘‰")])])}),[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç”Ÿæˆå…¬é’¥")]),t._v("\nssh-keygen -t rsa -P "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n\nxubin@xubindeMBP:~$ ssh-keygen\nGenerating public/private rsa key pair.\nEnter "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" to save the key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/Users/xubin/.ssh/id_rsa"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n/Users/xubin/.ssh/id_rsa already exists.\nOverwrite "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y/n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("? "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v("\nEnter passphrase "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("empty "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" no passphrase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\nEnter same passphrase again:\nYour identification has been saved "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /Users/xubin/.ssh/id_rsa.\nYour public key has been saved "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /Users/xubin/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:IeFPfrcQ3hhP64SRTAFzGIHl2ROcopl5HotRi2XNOGk xubin@xubindeMBP\nThe key's randomart image is:\n+---"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("RSA "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("----+\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("      .o*@"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("o     "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("oEB"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("o     "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("      o@"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("+O "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("B")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("+o @ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("So* *    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" o. "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("            o    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+----"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SHA256"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("-----+\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹å…¬é’¥")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" .ssh/id_rsa.pub \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å°†å…¬é’¥æ‹·è´åˆ°æœåŠ¡å™¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" ~/.ssh/id_rsa.pub root@47.98.252.XXX:/root\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å°†å…¬é’¥åŠ å…¥ä¿¡ä»»åˆ—è¡¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" id_dsa.pub "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.ssh/authorized_keys\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# root ä¸ºç”¨æˆ·å")]),this._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# ipåœ°å€")]),this._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("ssh")]),this._v(" root@47.98.252.XXX\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹ç›®å½•")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ”¹å˜å½“å‰ç›®å½•")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("directory_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ—å‡ºå½“å‰ç›®å½•çš„æ–‡ä»¶å’Œå­ç›®å½•")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -a     åˆ—å‡ºæ‰€æœ‰ç›®å½•ã€å­ç›®å½•ã€æ–‡ä»¶å’Œéšè—æ–‡ä»¶\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -R     åˆ—å‡ºä»å½“å‰ç›®å½•å¼€å§‹çš„æ‰€æœ‰çš„å­ç›®å½•ã€æ–‡ä»¶å¹¶ä¸”ä¸€å±‚å±‚å¾€ä¸‹æ˜¾ç¤º\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -F     åˆ—å‡ºæ–‡ä»¶ã€ç›®å½•åå¹¶æ˜¾ç¤ºå‡ºæ–‡ä»¶ç±»å‹\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -t     ä»¥ä¿®æ”¹æ—¶é—´ä¸ºæ—¶é—´å€’åºæ¥åˆ—å‡ºæ–‡ä»¶ã€å­ç›®å½•\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -l     ä»¥é•¿åˆ—è¡¨æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶ã€ç›®å½•çš„è¯¦ç»†ä¿¡æ¯\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹æ“ä½œ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" xxx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åŠ¨æ€æŸ¥çœ‹ä¿¡æ¯")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" -f xxx.log\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç£ç›˜å®¹é‡")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" -h\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç³»ç»Ÿé…ç½®")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /proc/cpuinfo \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å‘è¡Œç‰ˆæœ¬")]),t._v("\nlsb_release -a\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ—å‡ºç³»ç»Ÿä¸­å½“å‰è¿è¡Œçš„é‚£äº›è¿›ç¨‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n-a æ˜¾ç¤ºåŒä¸€ç»ˆç«¯ä¸‹çš„æ‰€æœ‰ç¨‹åº\n-A æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹\nc  æ˜¾ç¤ºè¿›ç¨‹çš„çœŸå®åç§°\n-N åå‘é€‰æ‹©\n-e ç­‰äºâ€œ-Aâ€\ne  æ˜¾ç¤ºç¯å¢ƒå˜é‡\nf  æ˜¾ç¤ºç¨‹åºé—´çš„å…³ç³»\n-H æ˜¾ç¤ºæ ‘çŠ¶ç»“æ„\nr  æ˜¾ç¤ºå½“å‰ç»ˆç«¯çš„è¿›ç¨‹\nT  æ˜¾ç¤ºå½“å‰ç»ˆç«¯çš„æ‰€æœ‰ç¨‹åº\nu  æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹\n-au æ˜¾ç¤ºè¾ƒè¯¦ç»†çš„èµ„è®¯\n-aux æ˜¾ç¤ºæ‰€æœ‰åŒ…å«å…¶ä»–ä½¿ç”¨è€…çš„è¡Œç¨‹ \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹å˜åŒ–ï¼Œç›‘æ§linuxçš„ç³»ç»ŸçŠ¶å†µ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("top")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# top è¿è¡Œä¸­å¯ä»¥é€šè¿‡ top çš„å†…éƒ¨å‘½ä»¤å¯¹è¿›ç¨‹çš„æ˜¾ç¤ºæ–¹å¼è¿›è¡Œæ§åˆ¶ã€‚å†…éƒ¨å‘½ä»¤å¦‚ä¸‹ï¼š")]),t._v("\ns â€“ æ”¹å˜ç”»é¢æ›´æ–°é¢‘ç‡\nl â€“ å…³é—­æˆ–å¼€å¯ç¬¬ä¸€éƒ¨åˆ†ç¬¬ä¸€è¡Œ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("top")]),t._v(" ä¿¡æ¯çš„è¡¨ç¤º\nt â€“ å…³é—­æˆ–å¼€å¯ç¬¬ä¸€éƒ¨åˆ†ç¬¬äºŒè¡Œ Tasks å’Œç¬¬ä¸‰è¡Œ Cpus ä¿¡æ¯çš„è¡¨ç¤º\nm â€“ å…³é—­æˆ–å¼€å¯ç¬¬ä¸€éƒ¨åˆ†ç¬¬å››è¡Œ Mem å’Œ ç¬¬äº”è¡Œ Swap ä¿¡æ¯çš„è¡¨ç¤º\nN â€“ ä»¥ PID çš„å¤§å°çš„é¡ºåºæ’åˆ—è¡¨ç¤ºè¿›ç¨‹åˆ—è¡¨\nP â€“ ä»¥ CPU å ç”¨ç‡å¤§å°çš„é¡ºåºæ’åˆ—è¿›ç¨‹åˆ—è¡¨\nM â€“ ä»¥å†…å­˜å ç”¨ç‡å¤§å°çš„é¡ºåºæ’åˆ—è¿›ç¨‹åˆ—è¡¨\nh â€“ æ˜¾ç¤ºå¸®åŠ©\nn â€“ è®¾ç½®åœ¨è¿›ç¨‹åˆ—è¡¨æ‰€æ˜¾ç¤ºè¿›ç¨‹çš„æ•°é‡\nq â€“ é€€å‡º "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("top")]),t._v("\ns â€“ æ”¹å˜ç”»é¢æ›´æ–°å‘¨æœŸ\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ€æ­»è¿›ç¨‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v("\n-l  ä¿¡å·ï¼Œè‹¥æœä¸åŠ ä¿¡å·çš„ç¼–å·å‚æ•°ï¼Œåˆ™ä½¿ç”¨â€œ-lâ€å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡å·åç§°\n-a  å½“å¤„ç†å½“å‰è¿›ç¨‹æ—¶ï¼Œä¸é™åˆ¶å‘½ä»¤åå’Œè¿›ç¨‹å·çš„å¯¹åº”å…³ç³»\n-p  æŒ‡å®škill å‘½ä»¤åªæ‰“å°ç›¸å…³è¿›ç¨‹çš„è¿›ç¨‹å·ï¼Œè€Œä¸å‘é€ä»»ä½•ä¿¡å·\n-s  æŒ‡å®šå‘é€ä¿¡å·\n-u  æŒ‡å®šç”¨æˆ· \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å…ˆç”¨psæŸ¥æ‰¾è¿›ç¨‹ï¼Œç„¶åç”¨killæ€æ‰")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" \n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç›‘æ§TCP/IPç½‘ç»œ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("netstat")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ—å‡ºæ‰€æœ‰ç«¯å£æƒ…å†µ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -a      # åˆ—å‡ºæ‰€æœ‰ç«¯å£")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -at     # åˆ—å‡ºæ‰€æœ‰TCPç«¯å£")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -au     # åˆ—å‡ºæ‰€æœ‰UDPç«¯å£")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ—å‡ºæ‰€æœ‰å¤„äºç›‘å¬çŠ¶æ€çš„Sockets")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -l   # åªæ˜¾ç¤ºç›‘å¬ç«¯å£")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -lt  # æ˜¾ç¤ºç›‘å¬TCPç«¯å£")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -lu  # æ˜¾ç¤ºç›‘å¬UDPç«¯å£")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -lx  # æ˜¾ç¤ºç›‘å¬UNIXç«¯å£")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ˜¾ç¤º PID å’Œè¿›ç¨‹åç§°")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -p")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ˜¾ç¤ºæ ¸å¿ƒè·¯ç”±ä¿¡æ¯")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -r")]),t._v("\nKernel IP routing table\nDestination     Gateway         Genmask         Flags   MSS Window  irtt Iface\ndefault         gateway         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0         UG        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" eth0\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".130.0   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0   U         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" eth0\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -rn   # æ˜¾ç¤ºæ•°å­—æ ¼å¼ï¼Œä¸æŸ¥è¯¢ä¸»æœºåç§°")]),t._v("\nKernel IP routing table\nDestination     Gateway         Genmask         Flags   MSS Window  irtt Iface\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".130.1   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0         UG        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" eth0\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".130.0   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0   U         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" eth0\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹ç«¯å£å’ŒæœåŠ¡")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -antp | grep ssh")]),t._v("\ntcp        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:22              "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:*               LISTEN      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("734")]),t._v("/sshd            \ntcp        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("52")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".130.20:22       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("119.129")]),t._v(".118.189:58737   ESTABLISHED "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1846")]),t._v("/sshd: root@pts \ntcp6       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" :::22                   :::*                    LISTEN      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("734")]),t._v("/sshd            \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -antp | grep 22")]),t._v("\ntcp        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:22              "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:*               LISTEN      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("734")]),t._v("/sshd            \ntcp        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("52")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".130.20:22       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("119.129")]),t._v(".118.189:58737   ESTABLISHED "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1846")]),t._v("/sshd: root@pts \ntcp6       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" :::22                   :::*                    LISTEN      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("734")]),t._v("/sshd            \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xiesshavip002 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç½‘ç»œæŠ“åŒ…å·¥å…·")]),t._v("\ntcpdump -nn -i eth0 icmp\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("systemctl\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# æ˜¾ç¤º ç³»ç»ŸçŠ¶æ€:")]),this._v("\nsystemctl status\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("p",[t._v("window nginx.exe")])]),n("li",[n("p",[t._v("é€šè¿‡åŒ…ç®¡ç†å®‰è£…\n"),n("code",[t._v("shell")])]),n("p",[n("code",[t._v("sudo apt-get install nginx #ubuntu")])]),n("p",[n("code",[t._v("sudo yum install nginx #centos")])]),n("p",[n("code",[t._v("sudo brew install nginx #mac")])])]),n("li",[n("p",[t._v("å®˜ç½‘ä¸‹è½½æºç ï¼Œå®‰è£…ä¾èµ–ï¼Œç¼–è¯‘åå®‰è£…")])]),n("li",[n("p",[t._v("dockerå®‰è£… dockerhub")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("nginx -v / -V æŸ¥çœ‹ç‰ˆæœ¬ / æŸ¥çœ‹ç‰ˆæœ¬å’Œé…ç½®ä¿¡æ¯ï¼ˆä¾èµ–åº“çš„æœ¬ä¿¡æ¯ï¼‰\nnginx -t æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•çŠ¶æ€,é…ç½®æ–‡ä»¶ä½ç½®\n\t\t# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\n\t\t# nginx: configuration file /etc/nginx/nginx.conf test is successful\nnginx -s quite å…³é—­æœåŠ¡ï¼ˆä¼˜é›…å…³é—­ï¼Œç­‰å¾…å½“å‰å·²å»ºç«‹çš„è¿æ¥å®Œæˆåå…³é—­æœåŠ¡ï¼‰\nnginx -s stop ç›´æ¥åœæ­¢æœåŠ¡\nnginx -s reload çƒ­é‡è½½ï¼Œä¸åœæ­¢æœåŠ¡çš„æƒ…å†µä¸‹é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå®ŒæˆæœåŠ¡é‡å¯\nnginx -s reopen é‡æ–°å¼€å§‹æ—¥å¿—æ–‡ä»¶\nservice nginx restart é‡å¯\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('http {\n    gzip  on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_min_length  5k;\n    gzip_buffers  4 16k;\n    gzip_http_version 1.1;\n    gzip_comp_level 4;\n    gzip_types  application/javascript text/plain application/x-javascript text/css application/xml application/json text/javascript;\n    gzip_disable "MSIE [1-6]\\.(?!.*SV1)";\n\n    server {\n        server_name Alex.com www.Alex.com;\n        listen 80;\n        root /home/baixx2/project;\n        location / {\n            index index.htm index.html;\n        }\n        # vue-router historyæ¨¡å¼\n        location / {\n            try_files $uri $uri/ /index.html;\n        }\n        # èµ„æºè®¾ç½®ç¼“å­˜\n        location ~ \\.(css|js|woff2|png) {\n           #expires 10d;\n           add_header Cache-Control max-age=4800;\n        }\n    }\n} \n')])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("http "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  /node_proxy")]),t._v("\n    upstream node_proxy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿™é‡Œubuntuå¯ä»¥ä¸ºå…¶ä»–è‡ªå®šä¹‰å­—ç¬¦ä¸²ï¼Œä¸‹æ–¹éœ€è¦å¡«å†™å¯¹åº”å­—ç¬¦ä¸²")]),t._v("\n        server "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:3000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3000ä¸ºéœ€è¦è½¬å‘çš„ç«¯å£å·")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#90ä¸ºè½¬å‘åˆ°çš„ç«¯å£å·")]),t._v("\n        location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            proxy_set_header X-Real-IP "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            proxy_set_header X-Forward-For "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$proxy_add_x_forwarded_for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            proxy_set_header Host "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_host")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            proxy_set_header X-Nginx-Proxy "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            proxy_pass http://node_proxy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä¸ä¸Šæ–¹å¯¹åº”")]),t._v("\n            proxy_redirect off"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("location ~* "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".io "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tproxy_set_header X-Real-IP "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tproxy_set_header X-Forwarded-For "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$proxy_add_x_forwarded_for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tproxy_set_header Host "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_host")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tproxy_set_header X-NginX-Proxy "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n\tproxy_pass http://localhost:3000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tproxy_redirect off"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n\tproxy_http_version "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tproxy_set_header Upgrade "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_upgrade")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tproxy_set_header Connection "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"upgrade"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("å®‰å…¨é€šè®¯çš„ä¼ è¾“åè®®")]),s("ul",[s("li",[this._v("ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½è®¤è¯")]),s("li",[this._v("ä¿æŠ¤äº¤æ¢æ•°æ®çš„çš„éšç§å’Œå®Œæ•´æ€§")]),s("li",[this._v("é˜²æ­¢äººä¸ºæ”»å‡»")]),s("li",[this._v("è¿è¥å•†åŠ«æŒ")]),s("li",[this._v("æ–°ç‰¹æ€§ WebRTC ã€Service Workerçš„å‰å°è¦ç´ ")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("å®šä¹‰Nginxè¿è¡Œçš„ç”¨æˆ·å’Œç”¨æˆ·ç»„")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("user www www")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("nginxè¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºç­‰äºCPUæ€»æ ¸å¿ƒæ•°")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("worker_processes 8")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("å…¨å±€é”™è¯¯æ—¥å¿—å®šä¹‰ç±»å‹ï¼Œ[ debug | info | notice | warn | error | crit ]")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("error_log /**var**/log/nginx/error.log info")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("è¿›ç¨‹æ–‡ä»¶")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("pid /**var**/run/nginx.pid;")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("ä¸€ä¸ªnginxè¿›ç¨‹æ‰“å¼€çš„æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ•°ç›®ï¼Œç†è®ºå€¼åº”è¯¥æ˜¯æœ€å¤šæ‰“å¼€æ–‡ä»¶æ•°ï¼ˆç³»ç»Ÿçš„å€¼ulimit -nï¼‰ä¸nginxè¿›ç¨‹æ•°ç›¸é™¤ï¼Œä½†æ˜¯nginxåˆ†é…è¯·æ±‚å¹¶ä¸å‡åŒ€ï¼Œæ‰€ä»¥å»ºè®®ä¸ulimit -nçš„å€¼ä¿æŒä¸€è‡´ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("worker_rlimit_nofile 65535;")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("å·¥ä½œæ¨¡å¼ä¸è¿æ¥æ•°ä¸Šé™")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("events{\n    #å‚è€ƒäº‹ä»¶æ¨¡å‹ï¼Œ\n    use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; \n    #epollæ¨¡å‹æ˜¯Linux 2.6ä»¥ä¸Šç‰ˆæœ¬å†…æ ¸ä¸­çš„é«˜æ€§èƒ½ç½‘ç»œI/Oæ¨¡å‹ï¼Œå¦‚æœè·‘åœ¨FreeBSDä¸Šé¢ï¼Œå°±ç”¨kqueueæ¨¡å‹ã€‚\n    use epoll;\n    #å•ä¸ªè¿›ç¨‹æœ€å¤§è¿æ¥æ•°ï¼ˆæœ€å¤§è¿æ¥æ•°=è¿æ¥æ•°*è¿›ç¨‹æ•°ï¼‰\n    worker_connections 65535;\n}\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("è®¾å®šhttpæœåŠ¡å™¨")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('http{\n    include mime.types; #æ–‡ä»¶æ‰©å±•åä¸æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨\n    default_type application/octet-stream; #é»˜è®¤æ–‡ä»¶ç±»å‹\n    #charset utf-8; #é»˜è®¤ç¼–ç \n    server_names_hash_bucket_size 128; #æœåŠ¡å™¨åå­—çš„hashè¡¨å¤§å°\n    client_header_buffer_size 32k; #ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶\n    large_client_header_buffers 4 64k; #è®¾å®šè¯·æ±‚ç¼“\n    client_max_body_size 8m; #è®¾å®šè¯·æ±‚ç¼“\n    sendfile on; #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼ï¼ŒsendfileæŒ‡ä»¤æŒ‡å®šnginxæ˜¯å¦è°ƒç”¨sendfileå‡½æ•°æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨è®¾ä¸º onï¼Œå¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„è´Ÿè½½ã€‚æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡æ˜¾ç¤ºä¸æ­£å¸¸æŠŠè¿™ä¸ªæ”¹æˆoffã€‚\n    autoindex on; #å¼€å¯ç›®å½•åˆ—è¡¨è®¿é—®ï¼Œåˆé€‚ä¸‹è½½æœåŠ¡å™¨ï¼Œé»˜è®¤å…³é—­ã€‚\n    tcp_nopush on; #é˜²æ­¢ç½‘ç»œé˜»å¡\n    tcp_nodelay on; #é˜²æ­¢ç½‘ç»œé˜»å¡\n    keepalive_timeout 120; #é•¿è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’\n\n    #FastCGIç›¸å…³å‚æ•°æ˜¯ä¸ºäº†æ”¹å–„ç½‘ç«™çš„æ€§èƒ½ï¼šå‡å°‘èµ„æºå ç”¨ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚ä¸‹é¢å‚æ•°çœ‹å­—é¢æ„æ€éƒ½èƒ½ç†è§£ã€‚\n    fastcgi_connect_timeout 300;\n    fastcgi_send_timeout 300;\n    fastcgi_read_timeout 300;\n    fastcgi_buffer_size 64k;\n    fastcgi_buffers 4 64k;\n    fastcgi_busy_buffers_size 128k;\n    fastcgi_temp_file_write_size 128k;\n\n    #gzipæ¨¡å—è®¾ç½®\n    gzip on; #å¼€å¯gzipå‹ç¼©è¾“å‡º\n    gzip_min_length 1k; #æœ€å°å‹ç¼©æ–‡ä»¶å¤§å°\n    gzip_buffers 4 16k; #å‹ç¼©ç¼“å†²åŒº\n    gzip_http_version 1.0; #å‹ç¼©ç‰ˆæœ¬ï¼ˆé»˜è®¤1.1ï¼Œå‰ç«¯å¦‚æœæ˜¯squid2.5è¯·ä½¿ç”¨1.0ï¼‰\n    gzip_comp_level 2; #å‹ç¼©ç­‰çº§\n    gzip_types text/plain application/x-javascript text/css application/xml;\n    #å‹ç¼©ç±»å‹ï¼Œé»˜è®¤å°±å·²ç»åŒ…å«text/htmlï¼Œæ‰€ä»¥ä¸‹é¢å°±ä¸ç”¨å†å†™äº†ï¼Œå†™ä¸Šå»ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªwarnã€‚\n    gzip_vary on;\n    #limit_zone crawler $binary_remote_addr 10m; #å¼€å¯é™åˆ¶IPè¿æ¥æ•°çš„æ—¶å€™éœ€è¦ä½¿ç”¨\n\n    upstream blog.ha97.com {\n        #upstreamçš„è´Ÿè½½å‡è¡¡ï¼Œweightæ˜¯æƒé‡ï¼Œå¯ä»¥æ ¹æ®æœºå™¨é…ç½®å®šä¹‰æƒé‡ã€‚weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§ã€‚\n        server 192.168.80.121:80 weight=3;\n        server 192.168.80.122:80 weight=2;\n        server 192.168.80.123:80 weight=3;\n    }\n \n    #è™šæ‹Ÿä¸»æœºçš„é…ç½®\n    server{\n        #ç›‘å¬ç«¯å£\n        listen 80;\n\n        #åŸŸåå¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨ç©ºæ ¼éš”å¼€\n        server_name www.ha97.com ha97.com;\n        index index.html index.htm index.php;\n        root /data/www/ha97;\n        location ~ .*\\.(php|php5)?${\n            fastcgi_pass 127.0.0.1:9000;\n            fastcgi_index index.php;\n            include fastcgi.conf;\n        }\n\n        #å›¾ç‰‡ç¼“å­˜æ—¶é—´è®¾ç½®\n        location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)${\n            expires 10d;\n        }\n\n        #JSå’ŒCSSç¼“å­˜æ—¶é—´è®¾ç½®\n        location ~ .*\\.(js|css)?${\n            expires 1h;\n        }\n\n        #æ—¥å¿—æ ¼å¼è®¾å®š\n        log_format access \'$remote_addr - $remote_user [$time_local] "$request" \'\n        \'$status $body_bytes_sent "$http_referer" \'\n        \'"$http_user_agent" $http_x_forwarded_for\';\n\n        #å®šä¹‰æœ¬è™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿—\n        access_log /var/log/nginx/ha97access.log access;\n\n        #å¯¹ "/" å¯ç”¨åå‘ä»£ç†\n        location / {\n            proxy_pass http://127.0.0.1:88;\n            proxy_redirect off;\n            proxy_set_header X-Real-IP $remote_addr;\n\n            #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n            #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®ï¼Œå¯é€‰ã€‚\n            proxy_set_header Host $host;\n            client_max_body_size 10m; #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°\n            client_body_buffer_size 128k; #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œ\n            proxy_connect_timeout 90; #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)\n            proxy_send_timeout 90; #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)\n            proxy_read_timeout 90; #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)\n            proxy_buffer_size 4k; #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°\n            proxy_buffers 4 32k; #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è®¾ç½®\n            proxy_busy_buffers_size 64k; #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰\n            proxy_temp_file_write_size 64k;\n            #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ \n        }\n\n        #è®¾å®šæŸ¥çœ‹NginxçŠ¶æ€çš„åœ°å€\n        location /NginxStatus {\n            stub_status on;\n            access_log on;\n            auth_basic "NginxStatus";\n            auth_basic_user_file conf/htpasswd;\n            #htpasswdæ–‡ä»¶çš„å†…å®¹å¯ä»¥ç”¨apacheæä¾›çš„htpasswdå·¥å…·æ¥äº§ç”Ÿã€‚\n        }\n\n        #æœ¬åœ°åŠ¨é™åˆ†ç¦»åå‘ä»£ç†é…ç½®\n        #æ‰€æœ‰jspçš„é¡µé¢å‡äº¤ç”±tomcatæˆ–resinå¤„ç†\n        location ~ .(jsp|jspx|do)?$ {\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_pass http://127.0.0.1:8080;\n        }\n        #æ‰€æœ‰é™æ€æ–‡ä»¶ç”±nginxç›´æ¥è¯»å–ä¸ç»è¿‡tomcatæˆ–resin\n        location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|pdf|xls|mp3|wma)${\n            expires 15d; \n        }\n        location ~ .*.(js|css)?${ \n            expires 1h; \n        }\n    }\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("npm install -g pm2\n\npm2 start app.js æˆ–è€… pm2 start bin/www  å¯åŠ¨nodeé¡¹ç›®\n\npm2 stop bin/www  åœæ­¢pm2æœåŠ¡\npm2 stop all åœæ­¢æ‰€æœ‰è¿›ç¨‹\npm2 stop 0 åœæ­¢æŒ‡å®šçš„è¿›ç¨‹\n\npm2 restart 0 é‡å¯æŒ‡å®šçš„è¿›ç¨‹\npm2 restart all é‡å¯æ‰€æœ‰è¿›ç¨‹\npm2 reload all 0ç§’åœæœºé‡è½½è¿›ç¨‹ (ç”¨äº NETWORKED è¿›ç¨‹)\n\npm2 delete 0 æ€æ­»æŒ‡å®šçš„è¿›ç¨‹\npm2 delete all æ€æ­»å…¨éƒ¨è¿›ç¨‹\n\npm2 list åˆ—å‡ºç”±pm2ç®¡ç†çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯ï¼Œè¿˜ä¼šæ˜¾ç¤ºä¸€ä¸ªè¿›ç¨‹ä¼šè¢«å¯åŠ¨å¤šå°‘æ¬¡ï¼Œå› ä¸ºæ²¡å¤„ç†çš„å¼‚å¸¸ã€‚\npm2 monit ç›‘è§†æ¯ä¸ªnodeè¿›ç¨‹çš„CPUå’Œå†…å­˜çš„ä½¿ç”¨æƒ…å†µ\npm2 logs æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹æ—¥å¿—\npm2 startup äº§ç”Ÿ init è„šæœ¬ ä¿æŒè¿›ç¨‹æ´»ç€\npm2 web è¿è¡Œå¥å£®çš„ computer API endpoint (http://localhost:9615)\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("pm2 start app.js -i max æ ¹æ®æœ‰æ•ˆCPUæ•°ç›®å¯åŠ¨æœ€å¤§è¿›ç¨‹æ•°ç›®\npm2 start app.js -i 3 å¯åŠ¨3ä¸ªè¿›ç¨‹\npm2 start app.js -x ç”¨forkæ¨¡å¼å¯åŠ¨ app.js è€Œä¸æ˜¯ä½¿ç”¨ cluster\npm2 start app.js -x -- -a 23 ç”¨forkæ¨¡å¼å¯åŠ¨ app.js å¹¶ä¸”ä¼ é€’å‚æ•° (-a 23)\npm2 start app.js --name serverone å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹å¹¶æŠŠå®ƒå‘½åä¸º serverone\npm2 stop serverone åœæ­¢ serverone è¿›ç¨‹\npm2 start app.json å¯åŠ¨è¿›ç¨‹, åœ¨ app.jsoné‡Œè®¾ç½®é€‰é¡¹\npm2 start app.js -i max -- -a 23 åœ¨--ä¹‹åç»™ app.js ä¼ é€’å‚æ•°\npm2 start app.js -i max -e err.log -o out.log å¯åŠ¨ å¹¶ ç”Ÿæˆä¸€ä¸ªé…ç½®æ–‡ä»¶\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('{\n  "apps": [                         //appsæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€ä¸ªæ•°ç»„æˆå‘˜å°±æ˜¯å¯¹åº”ä¸€ä¸ªpm2ä¸­è¿è¡Œçš„åº”ç”¨\n    {\n      "name": "PM2",                                           //åº”ç”¨ç¨‹åºåç§°\n      "cwd": "/srv/node-app/current",                          //åº”ç”¨ç¨‹åºæ‰€åœ¨çš„ç›®å½•\n      "script": "bin/www",                                     //åº”ç”¨ç¨‹åºçš„è„šæœ¬è·¯å¾„\n      "log_date_format": "YYYY-MM-DD HH:mm Z",\n      "error_file": "/var/log/node-app/node-app.stderr.log",   //è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„é”™è¯¯æ—¥å¿—æ–‡ä»¶\n      "out_file": "log/node-app.stdout.log",                   //è‡ªå®šä¹‰åº”ç”¨ç¨‹åºæ—¥å¿—æ–‡ä»¶\n      "pid_file": "pids/node-geo-api.pid",                     //è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„pidæ–‡ä»¶\n      "instances": 6,\n      "min_uptime": "200s",                                    //æœ€å°è¿è¡Œæ—¶é—´ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯60s\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tå³å¦‚æœåº”ç”¨ç¨‹åºåœ¨60så†…é€€å‡ºï¼Œpm2\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ä¼šè®¤ä¸ºç¨‹åºå¼‚å¸¸é€€å‡ºï¼Œæ­¤æ—¶è§¦å‘é‡å¯\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax_restartsè®¾ç½®æ•°é‡\n      "max_restarts": 10,                              //è®¾ç½®åº”ç”¨ç¨‹åºå¼‚å¸¸é€€å‡ºé‡å¯çš„æ¬¡æ•°ï¼Œé»˜è®¤15\t\t                                                æ¬¡ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰\n      "max_memory_restart": "1M",\n      "cron_restart": "1 0 * * *",                     //å®šæ—¶å¯åŠ¨\n      "watch": false,                                  //æ˜¯å¦å¯ç”¨ç›‘æ§æ¨¡å¼ï¼Œé»˜è®¤falseã€‚\n      "merge_logs": true,\n      "exec_interpreter": "node",                      //åº”ç”¨ç¨‹åºçš„è„šæœ¬ç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨çš„shellï¼Œ\t\t\t\t\t\t\t\t\t\t\t\t\t\t é»˜è®¤æ˜¯nodejs\n      "exec_mode": "fork",                             //åº”ç”¨ç¨‹åºå¯åŠ¨æ¨¡å¼ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯\t\t\t\t\t\t\t\t\t\t\t\t\t\t   cluster_modeï¼ˆé›†ç¾¤ï¼‰ï¼Œé»˜è®¤æ˜¯fork\n      "autorestart": false,                            //å¯ç”¨/ç¦ç”¨åº”ç”¨ç¨‹åºå´©æºƒæˆ–é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯\n      "vizion": false                                  //å¯ç”¨/ç¦ç”¨vizionç‰¹æ€§(ç‰ˆæœ¬æ§åˆ¶)\n    }\n  ]\n}\n')])])])}],!1,null,null,null);s.default=a.exports}}]);